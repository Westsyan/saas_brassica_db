@()(implicit session: Session)
@english.home.main("") {


    <style>
            #axtString {
                max-height: 300px;
            }

    </style>


    <div id="content-wrapper" class="large-text">

        <section class="indent">

            <div class="container">


                <hgroup class="page-head">
                    <h2 style="color: #207499">Lastz</h2>
                </hgroup>

                <hr style="border-top: 1px solid #d9d9d9;"/>

                <form class="registration-form form-horizontal" id="form"
                accept-charset="UTF-8" method="post">

                    <div class="form-group" >
                        <label class="control-label col-sm-2">Enter target sequence:</label>
                        <div class="col-sm-8">
                            <textarea class="form-control monospace" name="targetText" rows="5"></textarea>
                            <span class="help-block">e.g.,&nbsp;<a href="#"><em id="egTarget">
                                example</em></a></span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-sm-2">Or, upload file:</label>
                        <div class="col-sm-8">
                            <input type="file" class="file control-label" name="targetFile" data-show-preview="false"
                            data-show-upload="false">
                            <span class="help-block"><a href="javascript:downloadTarget();"><em>
                                Example file</em></a></span>
                        </div>
                    </div>

                    <div class="form-group" >
                        <label class="control-label col-sm-2">Enter query sequences:</label>
                        <div class="col-sm-8">
                            <textarea class="form-control monospace" name="queryText" rows="5"></textarea>
                            <span class="help-block">e.g.,&nbsp;<a href="#"><em id="egQuery">
                                example</em></a></span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-sm-2">Or, upload file:</label>
                        <div class="col-sm-8">
                            <input type="file" class="file control-label" name="queryFile" data-show-preview="false"
                            data-show-upload="false">
                            <span class="help-block"><a href="javascript:downloadQuery();"><em>
                                Example file</em></a></span>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="actions col-sm-offset-2 col-sm-2">
                            <button type="button" class="btn btn-primary" style="width: 90%;" id="search" onclick="mySearch()">
                                Run</button>
                        </div>

                        <div class="actions  col-sm-2">
                            <button type="reset" class="btn btn-primary" style="width: 90%;">
                                Reset</button>
                        </div>
                    </div>

                </form>

                <div id="result" style="display: none">
                    <hr>
                    <h4 style="color: black" id="missionResult">Result:</h4>
                    <h5>Axt result:
                        &nbsp;<button class="btn btn-primary" onclick="downloadAxt()"><i class="fa fa-download"></i>&nbsp;Download</button>
                    </h5>
                    <pre id="axtString" style="background-color: white"></pre>


                    <div id="download" style="margin-top: 20px">
                        <button type="button" class="btn btn-primary" id="deleteButton" onclick="downloadPng1()"
                        style="margin-bottom: 10px">
                            <i class="fa fa-download"></i>&nbsp;download Parallel result file
                        </button>
                    </div>
                    <div id="charts">
                        <div>no picture result！</div>
                    </div>

                    <div id="download">
                        <button type="button" class="btn btn-primary" id="deleteButton" onclick="downloadPng2()"
                        style="margin-bottom: 10px">
                            <i class="fa fa-download"></i>&nbsp;download Xoy result file
                        </button>
                    </div>
                    <div id="charts1">
                        <div>no picture result！</div>
                    </div>

                </div>
            </div>
        </section>
    </div>

    <script>
            var base641;
            var base642;

            var target = ">ta_iwgsc_1al_v2_1013902\nTTGTGGTCTTGAGTGATGGTTGTTGAGTTAAGAGCGTGTGTTATGTTTTCTTTCCCGTTG\nCAACGCACGGGCTCTTTTGCTAGTATTTTAAAAATATTTAATAGGTAAAATTAACATCAT\nATTTAGATTGCACACATTTTTCTAATAAAATTTCATATATAATATGTTAAAATCGAAGTT\nACAATTTAAAAGATACAGATAATTTAGAAAATCATTTTGTTTGACTCATATATATTCCAA\nAATAATATTTAAAAATACTTAACAGGTAAAAATAGTCTCATATTCATATTCTACATATTT\nTTCTAATCAAATTTCATTTATAACATGTTCAAATCAGAGTTACGGTTTAAAAGATATTGA\nTGATTTTAAAAAGCATTTGTTTGACTTAAATATGATCCGCGGATGAATTATCTAAAACAT\nCAGGGGGGGTTCGAAAAATGTAAAATAACGGTTCGGGTGTGACTTTAATCCGGACGGCGG\nGTTGATTTCAAGAAAAGACAAGGACTTTTGTATAAAATATGAAAATAACGATTCGTTTTA\nACTTAAAAACAGAACTGCGGGTTGAATTCTTTGAAATAGAGGGACTTTTTTAAAAAATGC\nCATGACGGACGAAAGAAACTTAATTTGCTTTATTATTAGGTAAAGATAGAGATATATACA\nCCCAAGGAACCGAGGCGTATTTCCCGTACAGTGAGGTCATTCTTCTGGGTACACAGTGTA\nGCCGTTCCGAAGAACCAGGAAAGGAAAATGCTCATGCCTGACATTGCATGCACCATGCAG\nCATCCTCCTTGTTGCAATCGCATAGTAATTTAGTCTAGTCCTCTGAACTAAAGCAATGGA\nGATATATATCACTCATACGACGGCCGACGGATATACAACGACGCAGTCCAGTAAAAGAAA\nAATCAACACGGATTATTATCCCAAGGTCCCAACCAACCCAACTAATAACAATTCAGCATT\nTGTGGGTTGTTTGAATGAATCTTTGACAAAGTCCTTGAACTGAACATTCCAATTTCTAGT\nACAAGCTTCTGTCCAAAGCACTGACATTTACACATTGAGCCAACCATCTACGAGACGACG\nTACTAATACGTATCATGCCAGCACGGCTCACCAAAGAATCGCCGCGGCCACGAGGGTGGC\nGGCGGCACCGGAGACCCTCCAGACTCCGTGCGCAAGTGGGTCGCCGGCGGCGCTGCTTCC\nGCGCGACCCCGTTGTGACCCGGCCGCCGTTCCATCCGCCGCCGCCCCTCCCGCCTCCACC\nCCGCCCTCCGCCGCCCCCTCCGCCGCGGCAGCACGCGCCCTGGAAACACGCGGCGACGCA\nGAGCAGCACCAGCAGCAGCGCGCAGAGCAGCCTCGCGTTGCTGCCTCTCATGGCCGGCCG\nTACGTCTCACCTGGTGACCCCTGCACCTACACGTACCTCGGCAACTCAAAGGAAAAAGGT\nACACGTACTTCGGTACTTGATCGAGGAGAGCAGATAGGCCAATATCTCCTCTCGTCTCGC\nCGGAGTTCGACCCCCTGCCATCCCGGTGCGTGGCTTATATGCACTGCACGGTGAGGGAGG\nGGAAGAAGGTGGCGGGAAACTGCGGCCTGTTCGAAAAGACGCGTGCTACTGGGCAAAGAC\nGTGTTTGCGTACATGCGTTCAACTGCGGCGCAAGGAAGAAAACAAGGGCACAGACATTTC\nGTGGCACTGATGCAGTCCGTGTGCCCGCGCGCCGCTGGCGAAAGCGATTGCCTTCTGCGC\nAAACAAAGAAGAAGCGATTTCCTAATTTTCTGCTACGTAAGAAGATGAAGATCTCTGTTG\nGTATTGATCGGGTATAAGCAGTTGACGTGAATTCATTTTTCAGGTACTCCGCGTCTTAGA\nACGTAAGCGTCACGTAGATCATGAACGACTCCATGAACGTAAGCATCGATCACGATAGTT\nCACCGGGCTAATCGGGCAAAACCGGTCGATGATTTTTAACGTGCAACAGTGCGTGGCCGC\nCCGTTCGGCGAACAAACGCATGTAGAATCAGGCACGGGACATTGACCCAATAGATGTATT\nCAATATTTATTTTTCTGCGAAATAGACGTATTCAATTTTGAAGGAGCAATGCAAATGAGC\nACGTGCGTTCCGTAATTCAGGTCAACGGTGACGCGTAAATGTTGAGATTTCGGGTGTATA\nTGTTTTTAGTGATATATTTGAATACACGTTATTGTTGACTGCCATTTAAGCACTATTCAA\nACTCTGGGTTTATATGGGTTTTCTCCTCATTATTTAAGTATATTCCAAGCAGAAAAAATT\nACACGAAATTTGGGCAACAAAAGTTTGAAAAAGTTGGCCCGCATGACAGTGACATCGTGA\nTAGCACCAAACGGTTTTGGTTACCTGCTGCGATTTGACTTGTCGCTTGTATACGACCGCC\nAGCTGACCAAGCGGCGCCAGCCTTCTCTGCTGAGATGACCAATAGATTGAGAGAAAAAGT\nTGGGTGAATATGCATGCATGCGTGTCTATTTAGTTCTATTTTAATACCATGTGTGTCAAA\nTTAACTCATTTTTATTTTGCGTGTAAGTGAGACAATATGTCACAATACAATAAAAAACAA\nAGAGATAATTAAGTGGCATGGACAATAAGTTTAGGGAAAAGCTTCCCTCGCCCGACTGAT\nCATCTCATTCTTGTCAATCGGGTCGCTTTCTCGCCATGTGCTCCCATGGCCCCTCCTACT\nACTTCCCGGCCTTATCTCTTCTGAGGAAGCATCTCCTTCACACGTGTTCCCTGGTCGTCT\nCTATTCCCCTCCCCAATCATCGTGCTTGAGAGGAGAGGTTTTCCATGGCAACGCAACCAC\nCGATACTATGAGGAGACGGCGCTATGACAACCACTATATGTTGCATCCCACGACCAAATC\nTGCGTTGCTACAAACGAAGGGCGACGCGAGCACTGCTTGTTGCATCCTTGCTATTATCGC\nACCAATGTTGCAGCAAACAGGAAGGGGTGATGACATCCACCCGTATCGCCGCCGTTGAGA\nGCATCTTCCTCTTCTCTCTGCCCCTTCCCAGCATCACGGTCTTTGTTCGTGTGACACCCA\nCGAAACATGGGCCTTGGTGCAATCCAAAATTAGTTGTGCTGCAAAGGGCTTCACAACATG\nGCTCATGTTGCAATCCAAAATTATAGTTGAATGCCTACCAAGTGAACACAACATGGGTCA\nTGGTGCAATCCAAAATTCGTTGTGTTGCAAAGGAGCTTCTCAACATGGCTCATGTTGCAA\nTCCAAAATTATAACTGAACAGGCCTACCAAGTGAACACAACATGGGTCATGGTGCAAACC\nCATGAGTGCAACATGACTCCTCTTGCAAATCATAAACCGCAGTTGAACGAGCCTGCAAAG\nCAAGTGCAACATGGATCTTGTTGCAAACCCCAAGCACAACTTAGCTCATGTTGCAAACCC\nTAAACCACAACTGAACAACCCCTGATCGGCTGGTTAACGCGTGCAGGATCGAACAACTCT\nGCAGGCAGTCGATCCGATCACTGCTTCAGCCGGCCAACGCGTAGTGTGTGCCTATATACA\nATAAAGACCCTGATAAAAACAAAAGCCACATATGTTATTTATGGTCTTAGTAATTTCTTT\nTCATATCACGATGTTCTCCAATGCATTTACTGAAGAAACATTAGATGAAATATGTGCATG\nAAGCCTAATACCGTTGAGCGCAATATGGCTGAAAACACCTACCCCACGACCCTCGCAAGA\nGTTCCAGTTTGCCAAAAAGTTTCTTCATGGTTGAATTTTCTTGGAATAATATCAAGACCT\nATAATGACCAAAAAGGATACCCTCTTGGTCCCCGCATTTCTCTTGAATGGCAACTTTAGT\nGGCGAAAAGCCTGGACTAGTCGCCAGGTCTCTTCCCTCCCTTTGCTCACTCTCATCACCA\nCTAGAAAGGACCACTGATTCACCACATGGTTGTCGGTAAAGGTGGAACGAAGGATCTTCC\nAGCTCCGCCCTCTCGTTGGGGGCTCTAGGTCCAAGGCGGCGGCCTCGGCCGATGGAGCAG\nCGACCGTTGGTGCTAGCCTCCACATTGGCCTCTTGGGGGCGAGGTGGAAACATGTGGAAC\nCTCTTGTGCGGGGCATTCTAGAAGGACCCATATTTGTTTTGATGACCTACCTCCCCAATA\nTCCACAATGTATTTGCACCGTACCATGTCCCCATTTGACATCAATCACTGGATTTGTGCA\nCGTGGGAAGAATGATTGTGGGAGGTGAGTGGAGAAATTTGTGGCGACGGAGCCGGCCTTA\nACGACGGCGACACCCATGGAGTCGTCTCCTACATGTAGGCATCATCAAGGTAGGGTGAGT\nATACACATGTGAAGGTTCTACAAGATTTGGTTTAATCACTGGGTGATGACCCCTAAAACT\nATTGTGAGAACATTGGGGTCTCTGGAATGCTCGGTGAAGAATTGAAGACTGTTGTGTAGC\nTTTTATTTGCTAGTTTATATAATTCCACATTAATTCATATGATGTACTATTAAGGAGGGT\nCTAAAGTGAACCAAGACGGGAAGTCTCTGTGTGCACTCAATCAAACCTATCTACACTTGC\nGAGCGAAAACTTGGAAATATCCTTTCCAAGCAAGCCTTCTAACTCATGTGTCAAAGTTTA\nTTCTCTGGGACACTCGAGTTAGAGTCCTCGCTAAGGAGTTAAGGGAAACATGCCCGTGAG\nGTTGTCCTAGTTTATTGCCTACCATTTGTGCCTGCTTTGGCCAGCATGTTGGTGGTGCAT\nCCCTTCCAATAGTCATCTTAATACACAACACTGGGCCACAACTATAAATAGATAACTACC\nCCCTCATATAGTGGTGGTTGCCGGGGATAAATTCTGCCAGGTGTAGGCAGTGAGCATCCC\nTCCTCACACCAATTTGTTACTAGTCTTAAGTGAGGGAAACCACCTAAGCCGAAGAACAAT\nCGTGATTGAGAATCACCAAAGAATTAGACCGATCCTAGACTTGACTTGATACTCCCAAGG\nAATGGTCATCCTCTACATAGTTAGGCATCATTCTAAGCATCAAACATGTGGATTCATCGA\nTGAACAAGTTTGTGCCAACCCAGAGATCAGCGCAAGATCTACCAGGAGTAACTAGGCGAG\nTTCTGCGACAATTAGCTCAAGAAGAACAGGGGGACTAGTATGTCCTCAGAGGAGTGGCTT\nCCTGTCCATCCAAGATGTAGATATGTTGCCAATATTTTCAATCTAGGTAAACAAATTCAA\nTGTGTCTTCGCCAAGATTACAAATTCTAACCATCGAAACCTTTACATTATGTACTTGGCG\nTGTTTTCAAGAATTTCTCCCTATATCTCTTCCCCGAAGACTTCTTGGACACTGTTTATTT\nTGAAGACTTTGCCTATGTCTAGATAGCTTTGTTCCTTAGCTTTATTTTGCTCCGTTTACC\nTTTTATTAAGTCTTCATTGTGATGCATTACTTGGTCCTTAATATGTATGCTTCTAAGCAC\nTGCAAGAATTTCTCGGTGTTGTTTAAGTTTCATTTAGTTATTCTTTAGGTTACCAAAGAA\nTAGGTAGTTTTCCAAAGAGTTGGTTAAAACGCCAATTCAGCCCCCTTCCCC\n>ta_iwgsc_1al_v2_1026911\nCGTTGAGCGGATGAAGGCCCTCGGCGCCAAGGTCGTCATGGACTGATCGGCCCCTGCATT\nTCGAGGTGAGATGAGATCTCTCTCGCGGAATTGGGAACTCAGATTAGCTTGAGCCGGCAC\nATTGATGACTTGCTGTAGTGAAATTGTCGAGAAACTGATGGCCCTTTCACCTATATGGTT\nGTTGCTACCTAGGATGTTGCCCATCACATTTCATTATGATGCAATGCCTTGCTGTCTAAT\nCCAGTAATGTACCCACAATCGCATTTCATTATGATGCAATGTGTGCCATTTGATTGCATT\nATTTCGCTGTGATCCTAGTAAGCAATGTGTGACATTTGATTGCATTGTTTCGCTGTGATC\nCTAATAACCCTTGCTGTTTAATCGCAACTGCACATTTCTGGATTTACAACTGTCCATTTG\nTCAGCAAGTCGAGTTATCGATTTCAGATGTATATGCAAATGTCTACTTTCTGCTGTGTTC\nCGTATGGATAAAATAAAGGCCGCTCTACCTTGAATGGAACTGAATCCTTGTGTGTTGGTG\nTATATTAATTTTCTTATTCGCACATATATCACAAATGCTGCGTTCCACTATTCCATAGAA\nAGAAGGAAGTAATTGTGCATTATGTATGCAAATTTAATTCTGCTCCTCATATCTGCAGGC\nACTGCTGAATGTATGAACCATATGACCACCATGGTTGATTGCTGCGAGCATTGTGGGACT\nGTCAGTGCCAATTGAATCTTTTCAGGCTCAAAGGTCACAATGCTGGATTCTCTTAGTTGC\nCTTCACTCTTATTTTGTTGATGAATTTTCTGTCCCTAACACGAAATGTGGAATAAAATAT\nTTTGAAAAATCAGATAAGAAACATGTGCTGACATGCATTTGGTTTCTTGTTAGAAGTACT\nATGGTGCACTGCCCTTCCTTGGCTCTGTGATCTGCTTGTGTTGTGGCAAAAGATTCAATT\nTTGGTGTAATGTGGTGGCCAGTTAACCAACTACAGATTTGTACACTGGATTATTATGCAG\nTTATAAAACATGGTCAACCAATTGTTACCATACATTTGAGTTTGTGATATCATGCTCCTG\nGCTTCCAACCAAACTGCAACTGTGGCCACTATGAGCACCACTAGTCTCCAGCAAATTCTT\nCTCTTTATGTATACATTGACATCTCTCGGAGCAAAAAGGAGAAAAAGAGTCCCCTCCGCA\nATGCCAAGGATGCTTTTGTTGTTCCTTTTGGTGTTTCATGTGGAGTAGCTAGCCTGAGAT\nAGGGGTTCAAAGCAGCCTGACATTAATATGCAGGGTTCAAAACAGTCTGAGAGGCAGAAA\nACGTGGGTTCAACAGAACAAGAGCTGCCTCCCAGATTGTTCAGGATGCTAGCTACTTCGA\nCATGAAACAACAAAAGGATGAAGACGTACTAATCTGCTGCTGCTGTAATTATCACTGTAA\nTTACCCTTACACGGACTACGTGGACATGTCTGCCTGCATCCCTACAGGTGGTTCAACTAT\nCACTGTCTCCGCTATCCGCTTAACCTCTCACTCGTGTAGGAAGCAATCATCAATGCTGAA\nCTGGGCGATGAGTTGTTCTTCTGCTGATTGGTTCAACGCCTGCAGGTCAATCCGAGAGAG\nTGTTATTTTAAATAAACAAACCATCCATGAAAAAAAGGAGGGAGCACCTAAGAAATAATT\nTAGAGGCCAACAACCTGCTGGTGTAGGGGCCCTGTTGGAGATGCTCTAAGAAAACAAATG\nACTAATCCTTCCATGCAAAGCCATATTATATGCTGGCGTAGTGCTACTAGTAGCTGTTGC\nCTCCTCTGTTAATGATGTAACCAATTCATTAGCCATAAAATAGACACAACCTGCCTCGCC\nCGTTGACCTCCTAACCACGCTCCTCAGCCTTACTTGGTAGTCCCATCGACATCTCTGATC\nTCGTTTCTTGGTGTTGTATCTTTGGCGACTCCATTCTTCAATGCGGCTGAACAAGAAGTG\nGTTGTTGATTTCTATCAAGGTTTGTTCTTTTTTCCCCTTCTCTCCCTTGGGTTGAGCTTT\nTGAATTGGAATTTGTGCTTTTCTGGTCTGATTGAGTACTTGATCTATTGTTGTTGTTCCA\nGACTTGTGATCGAGCCAGCTTGCATTTGGTTGCAGAAATATTATTTACCTGCAGATCGAC\nCGAGCTGCTACAGCTCTTGTTTACCTAGCATCGCAGCAGGTAAATCTTTTGAGCTAGTTT\nGGATTCTCCAGTTCAATGGCATGTTCAACAATGGTAAAATAGACACTGCTAACCTACGGT\nAGCTCCTAACCACACTACTCAGCCTTACTTGGTCATCCCCTGTCCATCTGGACCAACTAG\nTCTTAATCTCTTTTCTTGGTGTGGTATTCCAGCGACTCCATTCTTCATTGCGGTTGAACA\nAGAAGTGGCTGTTGATTTCTGTCAAGGTTTGCCTTTTTCTCTTCTCTCCCCTGGGTTAAG\nCTTTTGAATTGGAAGTTTGTGTTTTTTTGGTCCGAGTGAGTTCTTGATCTATTGTTGTTG\nTTCCAGGCTTGAGATCTAACCAGCTTGGTTGCGGAAATCTTGGGTGCATTGTTGGTCGGG\nGAACTTGATCTGTGGTGCGCGCTCTCTTCTCCTGCGGTTCGGGCACACTTCTTATTTACC\nTCGCATCGCAGCAGATAAATCTTTTGAGCTAGTTTGGTTGTTTTAGAGTACGATGGTATG\nGTTCACCAATAGTAAGAACTTCAATTTTCACCTCTCTTAGCGATGGGCTAGCCGGCTGTG\nGGCATCCAGGAGCTGGTGGCCTGTCGAGCGGGTGTGCCCGAACTGATTCACCTGCTCATC\nCTTGGGAAACAGAGTTGACTTTTGAAAGATGTAAACGCTACCACATAGATGGAACAGATC\nCAGATGTTTCAAGTCTGAATGAATGTGCAGCACAAACCAAAGGTAATGCCTTACGTACTT\nACACGGAATCAAGTTATGGTTGATGTGCTTTGGCATTTTCATACTAAGAAATGCCAACGA\nAAATTAACATGGCAGATCGAGCGACTGTGATGGAGGCCGTGGTGAGCGCCTCCCACGGCG\nCCGTGCAGATCCTGTTGAGGAAGCTCGGCAACATCCTCGCCACCAAATACACGCTTCTCC\nGCGGCATTCGTGGGGAGATCCAGGAGCTCAAGGATGTGCTCGAGAGCATGACTGCGTGCC\nTCCGCGACCTCGCAGACGATGATGATCACAACGAACAAGTACTGCAAATGCTAGTTGATG\nGATCTTTTTAGTTGAACTCTTTGATAGCAAGGAAAACATGTCTCTTGTAATGAGACGAGA\nCAAACACTGGCATGATTAACTGATGTGCTCATTCATATACGTGCAGACTAGGACTTGGAT\nGAAACAAGTGAGGGAGGCCGCGTTTGATGTGGAGGACTGTATGGACAGGTTCTGCCATCA\nCCTCAGCGAGAATCATGGAGACCGTCAAGGACTCCTGGAATACCTCCATAGGATGTTCAA\nCATGGTGCGAACATTGAGGGTGCGGCACAAGATGGCTACCGATATCCAGGGCCTCAAATC\nTCGTGCCCAGAAAGTGAGTGATCGGAGGCTCAGGTACACATACACTCTAGGTGACTCTGC\nTGGACGGTCGGGCAGAGCGCTTGATACTTACAGCCACCTCGACAACCTGGACCGCTGGCT\nGCCTGCAATCCATGATGACGGGTCTGGGCTAGTCGGTAGGACTGGACACGAGCCGAGCCG\nAGCCGAGCTTGATCCGAGCC"
            var query = ">ta_iwgsc_1al_v2_1026911\nCGTTGAGCGGATGAAGGCCCTCGGCGCCAAGGTCGTCATGGACTGATCGGCCCCTGCATT\nTCGAGGTGAGATGAGATCTCTCTCGCGGAATTGGGAACTCAGATTAGCTTGAGCCGGCAC\nATTGATGACTTGCTGTAGTGAAATTGTCGAGAAACTGATGGCCCTTTCACCTATATGGTT\nGTTGCTACCTAGGATGTTGCCCATCACATTTCATTATGATGCAATGCCTTGCTGTCTAAT\nCCAGTAATGTACCCACAATCGCATTTCATTATGATGCAATGTGTGCCATTTGATTGCATT\nATTTCGCTGTGATCCTAGTAAGCAATGTGTGACATTTGATTGCATTGTTTCGCTGTGATC\nCTAATAACCCTTGCTGTTTAATCGCAACTGCACATTTCTGGATTTACAACTGTCCATTTG\nTCAGCAAGTCGAGTTATCGATTTCAGATGTATATGCAAATGTCTACTTTCTGCTGTGTTC\nCGTATGGATAAAATAAAGGCCGCTCTACCTTGAATGGAACTGAATCCTTGTGTGTTGGTG\nTATATTAATTTTCTTATTCGCACATATATCACAAATGCTGCGTTCCACTATTCCATAGAA\nAGAAGGAAGTAATTGTGCATTATGTATGCAAATTTAATTCTGCTCCTCATATCTGCAGGC\nACTGCTGAATGTATGAACCATATGACCACCATGGTTGATTGCTGCGAGCATTGTGGGACT\nGTCAGTGCCAATTGAATCTTTTCAGGCTCAAAGGTCACAATGCTGGATTCTCTTAGTTGC\nCTTCACTCTTATTTTGTTGATGAATTTTCTGTCCCTAACACGAAATGTGGAATAAAATAT\nTTTGAAAAATCAGATAAGAAACATGTGCTGACATGCATTTGGTTTCTTGTTAGAAGTACT\nATGGTGCACTGCCCTTCCTTGGCTCTGTGATCTGCTTGTGTTGTGGCAAAAGATTCAATT\nTTGGTGTAATGTGGTGGCCAGTTAACCAACTACAGATTTGTACACTGGATTATTATGCAG\nTTATAAAACATGGTCAACCAATTGTTACCATACATTTGAGTTTGTGATATCATGCTCCTG\nGCTTCCAACCAAACTGCAACTGTGGCCACTATGAGCACCACTAGTCTCCAGCAAATTCTT\nCTCTTTATGTATACATTGACATCTCTCGGAGCAAAAAGGAGAAAAAGAGTCCCCTCCGCA\nATGCCAAGGATGCTTTTGTTGTTCCTTTTGGTGTTTCATGTGGAGTAGCTAGCCTGAGAT\nAGGGGTTCAAAGCAGCCTGACATTAATATGCAGGGTTCAAAACAGTCTGAGAGGCAGAAA\nACGTGGGTTCAACAGAACAAGAGCTGCCTCCCAGATTGTTCAGGATGCTAGCTACTTCGA\nCATGAAACAACAAAAGGATGAAGACGTACTAATCTGCTGCTGCTGTAATTATCACTGTAA\nTTACCCTTACACGGACTACGTGGACATGTCTGCCTGCATCCCTACAGGTGGTTCAACTAT\nCACTGTCTCCGCTATCCGCTTAACCTCTCACTCGTGTAGGAAGCAATCATCAATGCTGAA\nCTGGGCGATGAGTTGTTCTTCTGCTGATTGGTTCAACGCCTGCAGGTCAATCCGAGAGAG\nTGTTATTTTAAATAAACAAACCATCCATGAAAAAAAGGAGGGAGCACCTAAGAAATAATT\nTAGAGGCCAACAACCTGCTGGTGTAGGGGCCCTGTTGGAGATGCTCTAAGAAAACAAATG\nACTAATCCTTCCATGCAAAGCCATATTATATGCTGGCGTAGTGCTACTAGTAGCTGTTGC\nCTCCTCTGTTAATGATGTAACCAATTCATTAGCCATAAAATAGACACAACCTGCCTCGCC\nCGTTGACCTCCTAACCACGCTCCTCAGCCTTACTTGGTAGTCCCATCGACATCTCTGATC\nTCGTTTCTTGGTGTTGTATCTTTGGCGACTCCATTCTTCAATGCGGCTGAACAAGAAGTG\nGTTGTTGATTTCTATCAAGGTTTGTTCTTTTTTCCCCTTCTCTCCCTTGGGTTGAGCTTT\nTGAATTGGAATTTGTGCTTTTCTGGTCTGATTGAGTACTTGATCTATTGTTGTTGTTCCA\nGACTTGTGATCGAGCCAGCTTGCATTTGGTTGCAGAAATATTATTTACCTGCAGATCGAC\nCGAGCTGCTACAGCTCTTGTTTACCTAGCATCGCAGCAGGTAAATCTTTTGAGCTAGTTT\nGGATTCTCCAGTTCAATGGCATGTTCAACAATGGTAAAATAGACACTGCTAACCTACGGT\nAGCTCCTAACCACACTACTCAGCCTTACTTGGTCATCCCCTGTCCATCTGGACCAACTAG\nTCTTAATCTCTTTTCTTGGTGTGGTATTCCAGCGACTCCATTCTTCATTGCGGTTGAACA\nAGAAGTGGCTGTTGATTTCTGTCAAGGTTTGCCTTTTTCTCTTCTCTCCCCTGGGTTAAG\nCTTTTGAATTGGAAGTTTGTGTTTTTTTGGTCCGAGTGAGTTCTTGATCTATTGTTGTTG\nTTCCAGGCTTGAGATCTAACCAGCTTGGTTGCGGAAATCTTGGGTGCATTGTTGGTCGGG\nGAACTTGATCTGTGGTGCGCGCTCTCTTCTCCTGCGGTTCGGGCACACTTCTTATTTACC\nTCGCATCGCAGCAGATAAATCTTTTGAGCTAGTTTGGTTGTTTTAGAGTACGATGGTATG\nGTTCACCAATAGTAAGAACTTCAATTTTCACCTCTCTTAGCGATGGGCTAGCCGGCTGTG\nGGCATCCAGGAGCTGGTGGCCTGTCGAGCGGGTGTGCCCGAACTGATTCACCTGCTCATC\nCTTGGGAAACAGAGTTGACTTTTGAAAGATGTAAACGCTACCACATAGATGGAACAGATC\nCAGATGTTTCAAGTCTGAATGAATGTGCAGCACAAACCAAAGGTAATGCCTTACGTACTT\nACACGGAATCAAGTTATGGTTGATGTGCTTTGGCATTTTCATACTAAGAAATGCCAACGA\nAAATTAACATGGCAGATCGAGCGACTGTGATGGAGGCCGTGGTGAGCGCCTCCCACGGCG\nCCGTGCAGATCCTGTTGAGGAAGCTCGGCAACATCCTCGCCACCAAATACACGCTTCTCC\nGCGGCATTCGTGGGGAGATCCAGGAGCTCAAGGATGTGCTCGAGAGCATGACTGCGTGCC\nTCCGCGACCTCGCAGACGATGATGATCACAACGAACAAGTACTGCAAATGCTAGTTGATG\nGATCTTTTTAGTTGAACTCTTTGATAGCAAGGAAAACATGTCTCTTGTAATGAGACGAGA\nCAAACACTGGCATGATTAACTGATGTGCTCATTCATATACGTGCAGACTAGGACTTGGAT\nGAAACAAGTGAGGGAGGCCGCGTTTGATGTGGAGGACTGTATGGACAGGTTCTGCCATCA\nCCTCAGCGAGAATCATGGAGACCGTCAAGGACTCCTGGAATACCTCCATAGGATGTTCAA\nCATGGTGCGAACATTGAGGGTGCGGCACAAGATGGCTACCGATATCCAGGGCCTCAAATC\nTCGTGCCCAGAAAGTGAGTGATCGGAGGCTCAGGTACACATACACTCTAGGTGACTCTGC\nTGGACGGTCGGGCAGAGCGCTTGATACTTACAGCCACCTCGACAACCTGGACCGCTGGCT\nGCCTGCAATCCATGATGACGGGTCTGGGCTAGTCGGTAGGACTGGACACGAGCCGAGCCG\nAGCCGAGCTTGATCCGAGCC"


            $(function () {
                $('#egTarget').click(function () {
                    $("textarea[name='targetText']").val(target);
                });
                $('#egQuery').click(function () {
                    $("textarea[name='queryText']").val(query);
                });

            });

            function downloadAxt() {
                var fileName = "all.axt";
                var content = $("#axtString").text();
                var blob = new Blob([content], {
                    type: "text/plain;charset=utf-8"
                });
                saveAs(blob, fileName)
            }

            function downloadTarget() {
                var fileName = "target.fasta";
                var blob = new Blob([target], {
                    type: "text/plain;charset=utf-8"
                });
                saveAs(blob, fileName)
            }

            function downloadQuery() {
                var fileName = "query.fasta";
                var blob = new Blob([query], {
                    type: "text/plain;charset=utf-8"
                });
                saveAs(blob, fileName)
            }

            function targetCheck() {
                var text = $("textarea[name='targetText']").val();
                var file = $("input[name='targetFile']").val();
                var b = true;
                if (!file && !text) {
                    b = false;
                    swal("Error", "Please enter sequence or upload file!", "error")
                } else if (file && text) {
                    b = false;
                    swal("Error", "Please either enter target sequence into the box or upload a file, not both!", "error")
                }
                return b
            }

            function queryCheck() {
                var text = $("textarea[name='queryText']").val();
                var file = $("input[name='queryFile']").val();
                var b = true;
                if (!file && !text) {
                    b = false;
                    swal("Error", "Please enter sequence or upload file!", "error")
                } else if (file && text) {
                    b = false;
                    swal("Error", "Please either enter query sequence into the box or upload a file, not both!", "error")
                }
                return b
            }

            function mySearch() {
                var form = $("#form")
                if (targetCheck() && queryCheck()) {
                    var form1 = new FormData($("#form")[0]);
                    var element = "<div><span id='info'>Running...</span>&nbsp;<img class='runningImage' src='@routes.Assets.versioned("images/running2.gif")' style='width: 30px;height: 20px;'></div>"
                    var index = layer.alert(element, {
                        skin: 'layui-layer-lan'
                        , closeBtn: 0,
                        title: "Info",
                        btn: []
                    });
                    $.ajax({
                        url: "@routes.ToolsController.lastz()",
                        type: "post",
                        processData: false,
                        contentType: false,
                        data: form1,
                        success: function (data) {
                            layer.close(index);
                            if (data.valid === "false") {
                                swal("Error", data.message, "error");
                                $("#result").hide()
                            } else {
                                base641 = data.base641;
                                base642 = data.base642;
                                if(base641 === ""){
                                    $("#png1").hide();
                                }else{
                                    $("#charts").html("<img src='data:image/png;base64," + data.base641 + "' style='width:100%'>");
                                    $("#png1").show();
                                }
                                if(base642 === ""){
                                    $("#png2").hide();
                                }else{
                                    $("#charts1").html("<img src='data:image/png;base64," + data.base642 + "' style='width:100%'>");
                                    $("#png2").show();
                                }
                                $("#axtString").text(data.axtString);
                                $("#result").show()
                            }
                        }
                    });
                }
            }

            function downloadPng1() {
                var fileName = "Target-Query.parallel.png";
                var byteArrays = base642binaryArray(base641);
                var blob = new Blob(byteArrays, {
                    type: "image/png"
                });
                saveAs(blob, fileName)
            }

            function base642binaryArray(content) {
                var byteCharacters = atob(content);
                var byteArrays = [];
                var sliceSize = 512;
                for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {
                    var slice = byteCharacters.slice(offset, offset + sliceSize);
                    var byteNumbers = new Array(slice.length);
                    for (var i = 0; i < slice.length; i++) {
                        byteNumbers[i] = slice.charCodeAt(i);
                    }
                    var byteArray = new Uint8Array(byteNumbers);
                    byteArrays.push(byteArray);
                }
                return byteArrays
            }

            function downloadPng2() {
                var fileName = "Target-Query.xoy.png";
                var byteArrays = base642binaryArray(base642);
                var blob = new Blob(byteArrays, {
                    type: "image/png"
                });
                saveAs(blob, fileName)
            }

    </script>

}